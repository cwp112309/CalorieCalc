<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calorie Calc</title>
<style>
body { font-family: system-ui, sans-serif; margin: 0; padding: 24px; background: #f7fafc; color: #1a202c; display: flex; justify-content: center; }
.container { max-width: 900px; width: 100%; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.08); }
header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
h1 { margin: 0; font-size: 24px; }
button { background: #2b6cb0; color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; }
button.alt { background: #edf2f7; color: #1a202c; }
.card { background: #fff; padding: 12px; border-radius: 10px; border: 1px solid #e6edf3; margin-bottom: 12px; }
label { display: block; margin-top: 8px; font-size: 13px; color: #4a5568; }
input[type="text"], input[type="number"], input[type="password"] { width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #e2e8f0; margin-top: 6px; }
#entriesList div { padding: 6px 0; border-bottom: 1px dashed #e6edf3; display: flex; justify-content: space-between; }
.tot { font-size: 18px; font-weight: 700; margin-top: 8px; }
.hint { font-size: 12px; color: #718096; margin-top: 8px; }
canvas { margin-top: 12px; }
</style>
</head>
<body>
<div class="container">
<header>
<h1>Calorie Calc</h1>
<div id="authUI">
  <div id="anonArea">
    <button id="showLogin">Login</button>
    <button id="showSignup" class="alt">Sign Up</button>
  </div>
  <div id="userArea" style="display:none;">
    <span id="userEmail"></span>
    <button id="logoutBtn" class="alt">Logout</button>
  </div>
</div>
</header>

<div id="authCard" class="card">
  <div id="signupForm" style="display:none;">
    <h3>Sign Up</h3>
    <label>Username <input id="signupUsername" type="text"></label>
    <label>Password <input id="signupPass" type="password"></label>
    <button id="signupBtn">Sign Up</button>
    <div class="hint">Already have an account? <a href="#" id="toLogin">Login</a></div>
  </div>

  <div id="loginForm" style="display:none;">
    <h3>Login</h3>
    <label>Username <input id="loginUsername" type="text"></label>
    <label>Password <input id="loginPass" type="password"></label>
    <button id="loginBtn">Login</button>
    <div class="hint">No account? <a href="#" id="toSignup">Sign Up</a></div>
  </div>
</div>

<div id="mainContent" style="display:none;">
  <div class="card">
    <h3>Add Food</h3>
    <label>Food name <input id="foodName" type="text" placeholder="Banana"></label>
    <label>Calories <input id="calories" type="number" placeholder="105"></label>
    <button id="addBtn">Add Entry</button>
    <button id="exportCsv" class="alt">Export CSV</button>
  </div>

  <div class="card">
    <h3>Today's Total</h3>
    <div class="tot" id="todayTotal">0 kcal</div>
  </div>

  <div class="card">
    <h3>Recent Entries</h3>
    <div id="entriesList"><div class="hint">No entries yet.</div></div>
  </div>

  <div class="card">
    <h3>Calories Last 7 Days</h3>
    <canvas id="calorieChart" width="400" height="150"></canvas>
  </div>

  <div class="card">
    <h3>Quick Calculator</h3>
    <label>Amount (g) <input id="calcAmount" type="number" placeholder="100"></label>
    <label>Calories per 100g <input id="calcPer100" type="number" placeholder="250"></label>
    <button id="calcBtn">Calculate</button>
    <div id="calcResult" class="hint"></div>
  </div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let currentUser = null;
let chart = null;

function showAnon() {
  document.getElementById('anonArea').style.display = 'flex';
  document.getElementById('userArea').style.display = 'none';
  document.getElementById('signupForm').style.display = 'none';
  document.getElementById('loginForm').style.display = 'none';
  document.getElementById('mainContent').style.display = 'none';
}
showAnon();

// Switch forms
document.getElementById('showLogin').onclick = ()=>{ document.getElementById('loginForm').style.display='block'; document.getElementById('signupForm').style.display='none'; };
document.getElementById('showSignup').onclick = ()=>{ document.getElementById('signupForm').style
